<template>
  <div class="info">
    <div class="welcome">
      <el-form label-width="180px" :model="info" label-position="left">
        <h1>{{ $t("setting.info.welcome") }} <span class="icon">Ï€</span> ðŸ¤—</h1>
        <!-- <img src="/img/success.svg" alt="success" /> -->
        <svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M305.954 84.317a1.496 1.496 0 0 0-.613-.164c-7.914-2.55-16.275-3.433-24.542-2.742-15.746 1.596-27.448 9.823-34.946 24.441-9.016 17.64-23.099 21.092-23.664 21.269-.453.114-.898.37-1.191.761-.451.631-.432 1.434.008 2.07.44.635 1.205.934 1.913.749l.143-.009c1.647-.356 16.444-4.368 25.997-23.133 15.194-29.794 46.001-22.739 55.109-19.916.59.253 1.306.21 1.894-.055.334-.192.603-.495.753-.878.402-.972.024-2.014-.861-2.392Z"
            fill="#FE5274" />
          <mask id="a" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="101" y="57" width="203" height="203">
            <path
              d="M202.441 259.599c55.912 0 101.238-45.325 101.238-101.237 0-55.912-45.326-101.237-101.238-101.237-55.911 0-101.237 45.325-101.237 101.237 0 55.912 45.326 101.237 101.237 101.237Z"
              fill="#D6DAE1" />
          </mask>
          <g mask="url(#a)">
            <path
              d="M255.684 231.909c1.351 6.304 7.512 13.332 13.63 18.897 2.77 2.519 1.139 7.515-2.604 7.603l-46.746 1.098c-2.191.051-3.997-1.715-4.306-3.885-1.019-7.147-4.616-17.582-11.778-29.757-8.634-14.677-9.497-46.623-6.907-50.94s5.332-38.11 6.907-48.35c1.727-11.225 8.059-9.21 12.088-8.634 0-8.634 2.887-15.69 7.771-18.132 3.453-1.727 7.77-.863 8.634 2.591.863-5.18 4.317-9.498 11.224-8.635 6.854.857 6.525 9.927 5.949 14.532 1.152-2.302 6.623-6.376 11.319-5.034 4.317 1.233 5.18 4.317 5.18 7.771 0 3.453-3.453 14.677-7.77 34.535-3.454 15.887-.288 32.522 1.726 38.853-.575-5.18 6.044-18.366 17.268-22.448 14.248-5.181 18.132 6.044 15.542 9.498-6.908 6.043-12.088 10.36-18.995 28.492-12.39 32.524-20.722 19.858-18.132 31.945Z"
              fill="#25F4EE" />
            <path
              d="M142.994 206.066c7.923 18.993 3.233 35.331-2.823 45.266-1.899 3.115.312 8.263 3.96 8.259l46.497-.046c2.539-.003 4.489-2.413 4.372-4.95-.317-6.919.875-18.714 6.977-33.121 9.982-23.565 3.63-39.879 0-50.755-1.435-4.299-11.796-36.253-17.241-43.504-4.356-5.8-9.982-6.948-11.797-6.344-.907-1.812-.907-6.344-4.537-13.595-2.844-5.681-9.377-6.042-12.704-5.438-.907-2.719-3.25-6.344-8.167-6.344-6.887 0-8.167 5.438-7.259 9.063-9.075.907-10.934 9.781-7.982 19.385 4.878 15.871 10.012 34.995 11.611 49.496-1.512-3.927-8.13-12.517-19.056-14.501-9.981-1.813-10.486 8.157-7.259 11.782 7.259 8.158 14.519 9.245 25.408 35.347Z"
              fill="#FE5274" />
            <path
              d="M154.668 102.398c-2.59.864-1.73 6.418 0 11.029 2.59 6.908 12.163 30.536 15.668 52.062M139.299 106.42c.863 2.707 4.307 11.762 5.816 16.086 4.141 11.863 9.011 26.531 12.015 43.051M170.737 121.394c-1.302 1.172-2.344 4.435 0 8.652 2.931 5.27 10.108 22.929 12.111 35.944M237.597 213.987c-1.127-2.208-2.631-6.084-1.692-10.384 1.537-7.247 9.043-11.588 12.911-13.806 7.018-4.051 9.99-2.817 12.021-6.533M241.397 157.766a81.445 81.445 0 0 0-17.786 2.181c-8.821 2.127-15.865 5.551-20.903 8.458M240.557 157.621c.318-7.184.459-11.862 2.416-22.456 1.598-8.646 3.391-14.804 6.926-26.922M225.144 159.545c-.219-8.208.88-13.734 2.064-25.952.967-9.97 2.329-17.974 5.258-29.688M211.967 163.449c-.192-6.873.488-11.713 1.53-21.145.918-8.313 1.158-11.501 2.863-23.269"
              stroke="#000" stroke-width="1.952" stroke-miterlimit="10" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M204.376 177.504c4.005 12.515 4.005 30.035-3.084 44.908" stroke="#000" stroke-width="1.952"
              stroke-linecap="round" />
          </g>
          <path
            d="M230.683 40.624a2.31 2.31 0 0 0-1.501-.528c-.512-.002-.917.287-1.204.74-.796 1.31-8.062 12.812-11.122 22.778-2.256 1.124-4.229 2.785-5.784 4.887-7.087 10.755-5.801 29.203-5.787 29.934.112 1.153 1.065 2.198 2.148 2.285.445.051.84-.109 1.11-.302l.202-.145c.346-.372.508-.858.485-1.459 0 0-1.146-17.684 5.231-27.437.355-.501.701-.873 1.114-1.293-.404 5.842 2.009 8.924 4.507 9.847 2.499.923 5.469-.343 7.483-3.513 1.074-1.634 1.847-3.545 2.368-5.522 1.366-4.928-.454-7.324-2.171-8.438-1.716-1.113-3.9-1.028-5.716-.714 2.683-6.364 5.792-12.418 9.387-18.08.288-.453.324-.972.234-1.524-.216-.586-.566-1.075-.984-1.516Zm-4.664 28.513c-1.537 5.543-4.215 7.216-5.339 6.788-.562-.215-1.411-1.826-1.186-5.072.157-1.346.373-2.611.714-3.843 2.517-1.187 4.912-1.547 5.833-.974.31.148.423 1.301-.022 3.1Z"
            fill="#FE5274" />
          <path
            d="M123.428 69.405c-15.75 4.687-24.932-23.516-25.045-23.769-.185-.57-.558-.986-1.053-1.208-1.016-.549-2.368-.13-2.917.885-.222.495-.313 1.073-.128 1.643 1.891 5.64 4.5 11.004 7.843 15.924 6.525 9.376 14.309 13.01 22.489 10.542 15.897-4.776 24.387 14.732 24.75 15.596.387.97 1.443 1.454 2.461 1.279.106-.024.212-.048.359-.137.399-.202.734-.445.979-.835l.205-.325c.222-.495.248-1.114.022-1.62-1.938-4.125-4.487-8-7.617-11.243-6.543-6.755-14.315-9.111-22.348-6.732Z"
            fill="#25F4EE" />
          <path d="M274.46 60.366a5.006 5.006 0 1 0 0-10.012 5.006 5.006 0 0 0 0 10.012Z" fill="#00EADB" />
          <path d="M159.386 68.497a8.07 8.07 0 1 0 0-16.14 8.07 8.07 0 0 0 0 16.14Z" fill="#FE5275" />
          <path d="M190.522 87.72a5.167 5.167 0 1 0-.001-10.335 5.167 5.167 0 0 0 .001 10.335Z" fill="#00EADB" />
          <path
            d="M100.112 156.174a5.167 5.167 0 1 0 .001-10.335 5.167 5.167 0 0 0-.001 10.335ZM298.414 129.046a7.258 7.258 0 1 0 0-14.516 7.258 7.258 0 0 0 0 14.516Z"
            fill="#2450F5" />
          <path
            d="M274.363 151.281c5.476 0 9.915-4.439 9.915-9.915 0-5.476-4.439-9.915-9.915-9.915-5.476 0-9.915 4.439-9.915 9.915 0 5.476 4.439 9.915 9.915 9.915ZM111.172 115.238c5.476 0 9.915-4.439 9.915-9.915 0-5.476-4.439-9.915-9.915-9.915-5.476 0-9.915 4.44-9.915 9.915 0 5.476 4.439 9.915 9.915 9.915Z"
            fill="#E5E5E5" />
        </svg>
      </el-form>
    </div>
    <el-divider direction="vertical"></el-divider>
    <div class="initial">
      <el-form>
        <el-form-item>
          <div class="workspace">
            <el-button class="button" @click="click">é€‰æ‹©å·¥ä½œåŒº - <span>{{ filename }}</span></el-button>
          </div>
        </el-form-item>
        <el-form-item>
          <el-button>è¿›å…¥é»˜è®¤å·¥ä½œåŒº</el-button>
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref } from "vue";
import { reactive } from "vue";
import { dialog } from "@electron/remote";
import { fresh, piUserPath } from "@/init/path";

import { chooseWorkspace } from "@/data/configdb";
import { PIMODE } from "@/types/enums";
import { app_config_path } from "@/init/path";
const fsp = require("fs-extra");
let filename = ref("");
const value = ref("123123");
const info = reactive({});
const click = () => {
  dialog.showOpenDialog({ properties: ["openDirectory"] }).then((v) => {
    if (v.canceled) {
      return;
    }
    console.log("v", v.filePaths[0]);
    filename.value = v.filePaths[0];
    piUserPath.value = filename.value;
    chooseWorkspace.value = true;
    console.log(" ", fsp.readJSONSync(app_config_path.value));
    let config = fsp.readJSONSync(app_config_path.value);
    config.workspaces.push(v.filePaths[0]);
    config.recent = v.filePaths[0]
    fsp.writeJSONSync(app_config_path.value, config)

    fresh(PIMODE.DEVELOPMENT);
  });
};
</script>

<style lang="scss">
.info {
  display: flex;

  .welcome {
    flex: 4;
    text-align: center;
    padding: 1rem;
    max-width: 400px;
    margin: auto;
    user-select: none;
    height: 100%;

    .el-form-item__label i {
      margin-right: 1rem;
      font-size: 1rem;
    }

    h1 {
      margin: 20px;

      .icon {
        font-family: sans-serif;
        color: var(--pi-theme-color);
        font-size: 3rem;
        font-weight: bolder;
        position: relative;
        top: 2px;
      }
    }
  }

  .initial {
    padding: 2rem;

    flex: 4;

    .workspace {
      width: 100%;
      padding-top: 0.1rem;
      padding-bottom: 0.1rem;
      border: solid 1px #ddd;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;

      .button {
        margin-right: 20px;
      }
    }
  }
}
</style>
